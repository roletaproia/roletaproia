/** * Bookmarklet para capturar n√∫meros da roleta 1win automaticamente * * COMO USAR: * 1. Copie todo o c√≥digo abaixo * 2. Crie um novo favorito no navegador * 3. Cole o c√≥digo no campo "URL" do favorito * 4. Abra a roleta da 1win * 5. Clique no favorito para ativar */javascript:(function() { // Configura√ß√£o const CONFIG = { BACKEND_URL: 'https://roletaproia.onrender.com', CHECK_INTERVAL: 2000, // Verificar a cada 2 segundos MAX_RETRIES: 3 }; // Estado let lastNumber = null; let isRunning = false; let checkInterval = null; // Criar interface visual function createUI() { // Remover UI antiga se existir const oldUI = document.getElementById('roleta-pro-ui'); if (oldUI) oldUI.remove(); const ui = document.createElement('div'); ui.id = 'roleta-pro-ui'; ui.style.cssText = ` position: fixed; top: 20px; right: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 12px; box-shadow: 0 8px 32px rgba(0,0,0,0.3); z-index: 999999; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; min-width: 280px; `; ui.innerHTML = ` <div style="font-size: 18px; font-weight: bold; margin-bottom: 10px;"> ü§ñ Roleta Pro I.A. </div> <div style="font-size: 12px; opacity: 0.9; margin-bottom: 15px;"> Captura Autom√°tica v1.0 </div> <div style="background: rgba(255,255,255,0.2); padding: 10px; border-radius: 8px; margin-bottom: 10px;"> <div style="font-size: 11px; opacity: 0.8; margin-bottom: 5px;">Status:</div> <div id="status" style="font-size: 14px; font-weight: 600;">üü¢ Monitorando</div> </div> <div style="background: rgba(255,255,255,0.2); padding: 10px; border-radius: 8px; margin-bottom: 10px;"> <div style="font-size: 11px; opacity: 0.8; margin-bottom: 5px;">√öltimo N√∫mero:</div> <div id="last-number" style="font-size: 24px; font-weight: bold; text-align: center;">-</div> </div> <div style="background: rgba(255,255,255,0.2); padding: 10px; border-radius: 8px; margin-bottom: 10px;"> <div style="font-size: 11px; opacity: 0.8; margin-bottom: 5px;">Total Capturado:</div> <div id="total-captured" style="font-size: 14px; font-weight: 600;">0</div> </div> <button id="stop-btn" style=" width: 100%; padding: 10px; background: rgba(255,255,255,0.3); border: none; border-radius: 6px; color: white; font-weight: 600; cursor: pointer; font-size: 14px; ">‚è∏Ô∏è Parar</button> `; document.body.appendChild(ui); // Event listener para bot√£o de parar document.getElementById('stop-btn').addEventListener('click', stop); } // Detectar n√∫mero atual function detectNumber() { try { // Procurar em iframes const iframes = document.querySelectorAll('iframe'); for (const iframe of iframes) { try { // Tentar acessar o conte√∫do do iframe const iframeDoc = iframe.contentDocument || iframe.contentWindow.document; // M√©todo 1: Procurar por span com classe "value" const valueSpan = iframeDoc.querySelector('div[data-role="recent-number"] span[class*="value"]'); if (valueSpan) { const num = parseInt(valueSpan.textContent.trim()); if (!isNaN(num) && num >= 0 && num <= 36) { return num; } } // M√©todo 2: Procurar por data-role="number-X" const numberDivs = iframeDoc.querySelectorAll('div[data-role^="number-"]'); if (numberDivs.length > 0) { const dataRole = numberDivs[0].getAttribute('data-role'); const match = dataRole.match(/number-(\d+)/); if (match) { const num = parseInt(match[1]); if (!isNaN(num) && num >= 0 && num <= 36) { return num; } } } } catch (e) { // Iframe com CORS, n√£o conseguimos acessar console.log('N√£o foi poss√≠vel acessar iframe:', e.message); } } return null; } catch (error) { console.error('Erro ao detectar n√∫mero:', error); return null; } } // Enviar n√∫mero para o backend async function sendNumber(number) { try { const response = await fetch(`${CONFIG.BACKEND_URL}/api/betting-robot/add-number`, { method: 'POST', headers: { 'Content-Type': 'application/json', }, body: JSON.stringify({ number: number, timestamp: Date.now(), source: 'bookmarklet' }) }); if (response.ok) { console.log(`N√∫mero ${number} enviado com sucesso!`); return true; } else { console.error('Erro ao enviar n√∫mero:', response.statusText); return false; } } catch (error) { console.error('Erro ao enviar n√∫mero:', error); return false; } } // Atualizar UI function updateUI(number, total) { const lastNumberEl = document.getElementById('last-number'); const totalEl = document.getElementById('total-captured'); if (lastNumberEl) { lastNumberEl.textContent = number; lastNumberEl.style.animation = 'pulse 0.5s'; setTimeout(() => { lastNumberEl.style.animation = ''; }, 500); } if (totalEl) { totalEl.textContent = total; } } // Loop de monitoramento let totalCaptured = 0; function checkForNewNumber() { if (!isRunning) return; const currentNumber = detectNumber(); if (currentNumber !== null && currentNumber !== lastNumber) { console.log(`Novo n√∫mero detectado: ${currentNumber}`); lastNumber = currentNumber; totalCaptured++; // Atualizar UI updateUI(currentNumber, totalCaptured); // Enviar para backend sendNumber(currentNumber); } } // Iniciar monitoramento function start() { if (isRunning) { alert('J√° est√° monitorando!'); return; } isRunning = true; createUI(); checkInterval = setInterval(checkForNewNumber, CONFIG.CHECK_INTERVAL); console.log('Monitoramento iniciado!'); } // Parar monitoramento function stop() { isRunning = false; if (checkInterval) { clearInterval(checkInterval); checkInterval = null; } const ui = document.getElementById('roleta-pro-ui'); if (ui) ui.remove(); console.log('Monitoramento parado!'); } // CSS para anima√ß√£o const style = document.createElement('style'); style.textContent = ` @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } } `; document.head.appendChild(style); // Iniciar start();})();