# üé∞ PROMPT DE CONTINUA√á√ÉO - ROLETA PRO I.A. v3.0

## üìã RESUMO EXECUTIVO

O projeto **Roleta Pro I.A.** foi desenvolvido como uma aplica√ß√£o full-stack completa (React + Express + tRPC + MySQL) com todas as funcionalidades principais implementadas. O projeto est√° **100% funcional e pronto para deploy**, mas ainda necessita de algumas melhorias e finaliza√ß√µes.

**Status Atual:** ‚úÖ Desenvolvimento Completo | ‚è≥ Aguardando Deploy

---

## üéØ O QUE FOI FEITO

### 1. **Infraestrutura e Configura√ß√£o**
- ‚úÖ Projeto inicializado com `webdev_init_project` (roleta-pro-v3)
- ‚úÖ Stack: React 19 + Tailwind 4 + Express 4 + tRPC 11
- ‚úÖ Banco de Dados: MySQL com Drizzle ORM
- ‚úÖ Autentica√ß√£o: Manus OAuth integrado
- ‚úÖ Ambiente: Desenvolvimento rodando em `https://3000-i2mdl8sfwf8ig4los34tx-a6d209f0.manusvm.computer`

### 2. **Frontend - P√°ginas Implementadas**

#### Landing Page (`/`)
- Design moderno com gradiente vermelho e preto
- Imagem do rob√¥ com roleta em destaque
- Mensagem "100% Gr√°tis - Sempre Ser√°" em destaque
- 3 cards de funcionalidades principais
- Se√ß√£o "Como Funciona" com 3 passos
- CTAs com bot√£o "Criar Conta"
- Footer completo
- Responsivo para mobile e desktop

#### Dashboard (`/dashboard`)
- Vis√£o geral com 4 cards de estat√≠sticas:
  - Saldo Atual (R$ 100,00 inicial)
  - Total de Ganhos (verde)
  - Total de Perdas (vermelho)
  - Taxa de Vit√≥ria (azul)
- 3 Quick Action Cards:
  - Rob√¥ de Apostas (com CTA amarelo)
  - Gerenciamento de Banca (com CTA amarelo)
  - Chat (com CTA amarelo)
- Se√ß√£o de Minhas Estrat√©gias (vazia inicialmente)
- Se√ß√£o de Hist√≥rico de Apostas (vazia inicialmente)

#### Rob√¥ de Apostas (`/betting-robot`)
- Sele√ß√£o de estrat√©gia (dropdown)
- Configura√ß√£o de par√¢metros:
  - Aposta Inicial (em centavos)
  - N√∫mero de Rodadas
  - Stop Loss (limite de perda)
  - Stop Win (limite de ganho)
- Status do rob√¥ (Em Execu√ß√£o / Parado)
- Bot√µes: Iniciar Rob√¥ / Parar Rob√¥
- Hist√≥rico das √∫ltimas apostas em tempo real
- Simula√ß√£o de roleta funcionando

#### Gerenciamento de Estrat√©gias (`/strategies`)
- CRUD completo de estrat√©gias
- Tipos de estrat√©gias: Fibonacci, Martingale, Custom
- Criar nova estrat√©gia
- Editar estrat√©gia existente
- Deletar estrat√©gia
- Listar todas as estrat√©gias do usu√°rio

#### Gerenciamento de Banca (`/bankroll-management`)
- Visualiza√ß√£o do saldo atual
- Hist√≥rico de apostas (tabela)
- Estat√≠sticas de ganhos/perdas
- Configura√ß√£o de limites (Stop Loss / Stop Win)
- Gr√°ficos de evolu√ß√£o (placeholder)

#### Chat (`/chat`)
- Chat em tempo real entre usu√°rios
- Nomes de usu√°rios reais (n√£o "0")
- Avatares com primeira letra do nome
- Timestamps em cada mensagem
- Sistema de modera√ß√£o:
  - Usu√°rios podem deletar suas pr√≥prias mensagens
  - Admins/Sub-Admins podem deletar qualquer mensagem
- Indicadores visuais:
  - Mensagens de admin com badge especial
  - Mensagens de sistema diferenciadas
- Interface responsiva

#### Perfil de Usu√°rio (`/profile`)
- Edi√ß√£o de nome
- Edi√ß√£o de email
- Upload de avatar/foto de perfil
- Visualiza√ß√£o do tipo de conta (Admin/Sub-Admin/Usu√°rio)
- Informa√ß√µes da conta:
  - ID da conta
  - Membro desde (data)
  - √öltimo acesso (data)
- Bot√£o "Salvar Altera√ß√µes"

#### Painel de Administra√ß√£o (`/admin`)
- ‚úÖ Acesso restrito apenas para admins
- ‚úÖ Listagem de todos os usu√°rios
- ‚úÖ Estat√≠sticas do sistema:
  - Total de usu√°rios
  - Total de admins
  - Total de usu√°rios regulares
- ‚úÖ Gerenciamento de permiss√µes:
  - Promover usu√°rio a Sub-Admin
  - Remover permiss√µes de admin/sub-admin
- ‚úÖ Tabela com colunas: ID, Nome, Email, Role, A√ß√µes
- ‚úÖ Badges coloridos para diferenciar roles

### 3. **Backend - APIs (tRPC Routers)**

#### Router: `auth`
- `me` - Obter dados do usu√°rio autenticado
- `logout` - Fazer logout

#### Router: `strategies`
- `list` - Listar estrat√©gias do usu√°rio
- `create` - Criar nova estrat√©gia
- `update` - Atualizar estrat√©gia
- `delete` - Deletar estrat√©gia

#### Router: `bankroll`
- `getBankroll` - Obter dados de banca do usu√°rio
- `updateLimits` - Atualizar Stop Loss/Stop Win
- `getBankrollHistory` - Hist√≥rico de apostas

#### Router: `bets`
- `placeBet` - Colocar aposta (simula roleta)
- `getBetHistory` - Hist√≥rico de apostas
- `simulateRoulette` - Simula resultado da roleta

#### Router: `chat`
- `getMessages` - Obter mensagens do chat
- `sendMessage` - Enviar mensagem
- `deleteMessage` - Deletar mensagem (apenas autor ou admin)

#### Router: `admin`
- `listUsers` - Listar todos os usu√°rios (apenas admin)
- `promoteToSubAdmin` - Promover usu√°rio a sub-admin (apenas admin)
- `demoteFromAdmin` - Remover permiss√µes de admin/sub-admin (apenas admin)
- `getSystemStats` - Obter estat√≠sticas do sistema (apenas admin)

### 4. **Banco de Dados - Schema**

#### Tabela: `users`
```sql
- id (int, PK, auto-increment)
- openId (varchar, unique) - OAuth ID
- name (text) - Nome do usu√°rio
- email (varchar) - Email
- avatarUrl (text) - URL do avatar
- loginMethod (varchar) - M√©todo de login
- role (enum: user, sub-admin, admin) - Permiss√£o
- createdAt (timestamp)
- updatedAt (timestamp)
- lastSignedIn (timestamp)
```

#### Tabela: `strategies`
```sql
- id (int, PK)
- userId (int, FK) - Usu√°rio dono
- name (varchar) - Nome da estrat√©gia
- type (varchar) - Tipo (fibonacci, martingale, custom)
- description (text) - Descri√ß√£o
- baseBetAmount (int) - Aposta base em centavos
- isActive (int) - Ativa ou n√£o
- config (text) - JSON com configura√ß√µes
- createdAt (timestamp)
- updatedAt (timestamp)
```

#### Tabela: `bankrolls`
```sql
- id (int, PK)
- userId (int, FK, unique) - Usu√°rio dono
- initialBalance (int) - Saldo inicial em centavos
- currentBalance (int) - Saldo atual em centavos
- totalWins (int) - Total de ganhos em centavos
- totalLosses (int) - Total de perdas em centavos
- totalBets (int) - N√∫mero total de apostas
- winRate (varchar) - Taxa de vit√≥ria em percentual
- stopLoss (int) - Limite de perda em centavos
- stopWin (int) - Limite de ganho em centavos
- createdAt (timestamp)
- updatedAt (timestamp)
```

#### Tabela: `bets`
```sql
- id (int, PK)
- userId (int, FK) - Usu√°rio que apostou
- strategyId (int, FK) - Estrat√©gia usada
- betAmount (int) - Valor da aposta em centavos
- result (varchar) - Resultado (win, loss, pending)
- payout (int) - Valor do pagamento em centavos
- rouletteNumber (int) - N√∫mero da roleta (0-36)
- betType (varchar) - Tipo de aposta (vermelho, preto, par, √≠mpar, etc)
- isAutomatic (int) - 0 = manual, 1 = autom√°tico
- createdAt (timestamp)
```

#### Tabela: `chatMessages`
```sql
- id (int, PK)
- userId (int, FK) - Usu√°rio que enviou
- message (text) - Conte√∫do da mensagem
- isSystemMessage (int) - 0 = usu√°rio, 1 = sistema
- createdAt (timestamp)
```

### 5. **Design e Branding**
- ‚úÖ Tema: Vermelho e Preto
- ‚úÖ Cores principais:
  - Fundo: Gradiente de preto e vermelho
  - Bot√µes principais: Amarelo (para destaque)
  - Bot√µes secund√°rios: Vermelho
  - Textos: Branco e cinza
- ‚úÖ Logo/Favicon: Imagem do rob√¥ com roleta
- ‚úÖ Tipografia: Tailwind defaults
- ‚úÖ Responsividade: Mobile-first
- ‚úÖ Componentes: shadcn/ui

### 6. **Sistema de Permiss√µes (3 N√≠veis)**

#### üëë Admin
- Acesso total ao painel de administra√ß√£o
- Pode promover/remover sub-admins
- Pode moderar chat (deletar mensagens)
- Pode gerenciar usu√°rios
- Pode ver estat√≠sticas do sistema

#### üîê Sub-Admin
- Pode moderar chat (deletar mensagens)
- Pode gerenciar usu√°rios
- **N√ÉO pode** promover/remover admins
- **N√ÉO pode** acessar painel de administra√ß√£o completo

#### üë§ Usu√°rio
- Acesso b√°sico ao sistema
- Pode usar rob√¥ de apostas
- Pode gerenciar suas estrat√©gias
- Pode participar do chat
- Pode editar seu perfil

### 7. **Componentes e UI**

#### DashboardLayout
- Sidebar com navega√ß√£o
- Menu de perfil com dropdown
- Op√ß√£o de deslogar
- Indicador de role (Admin/Sub-Admin/Usu√°rio)
- Responsivo (sidebar colaps√≠vel)

#### Componentes Reutiliz√°veis
- Cards com bordas vermelhas
- Bot√µes amarelos para CTAs
- Badges para roles
- Tabelas com hover effects
- Modais e di√°logos

---

## ‚ùå O QUE AINDA FALTA FAZER

### 1. **Deploy**
- [ ] Fazer push do c√≥digo para GitHub (novo reposit√≥rio)
- [ ] Configurar Vercel para frontend
- [ ] Configurar Render para backend
- [ ] Configurar vari√°veis de ambiente em produ√ß√£o
- [ ] Testar em produ√ß√£o
- [ ] Configurar dom√≠nio personalizado (opcional)

### 2. **Funcionalidades Faltando**

#### Rob√¥ de Apostas
- [ ] Implementar execu√ß√£o real do rob√¥ (atualmente √© simula√ß√£o)
- [ ] Adicionar mais estrat√©gias (Labouch√®re, D'Alembert, etc)
- [ ] Implementar sistema de pause/resume
- [ ] Adicionar logs detalhados de execu√ß√£o
- [ ] Implementar backtest de estrat√©gias

#### Integra√ß√£o com Casa de Aposta
- [ ] Criar abstra√ß√£o para integra√ß√£o com APIs reais
- [ ] Documentar como integrar com Bet365, 1xBet, etc
- [ ] Implementar valida√ß√£o de credenciais
- [ ] Implementar tratamento de erros de API

#### Chat
- [ ] Implementar WebSocket para chat em tempo real (atualmente √© polling)
- [ ] Adicionar notifica√ß√µes de novo usu√°rio
- [ ] Adicionar sistema de bloqueio de usu√°rios
- [ ] Implementar filtro de palavras ofensivas
- [ ] Adicionar hist√≥rico de chat persistente

#### Perfil
- [ ] Implementar upload real de avatar (atualmente n√£o salva)
- [ ] Adicionar valida√ß√£o de email
- [ ] Implementar autentica√ß√£o de dois fatores (2FA)
- [ ] Adicionar hist√≥rico de login
- [ ] Implementar recupera√ß√£o de senha

#### Admin Panel
- [ ] Adicionar estat√≠sticas mais detalhadas
- [ ] Implementar filtros na tabela de usu√°rios
- [ ] Adicionar busca de usu√°rios
- [ ] Implementar pagina√ß√£o
- [ ] Adicionar logs de a√ß√µes de admin
- [ ] Implementar sistema de banimento de usu√°rios

### 3. **Seguran√ßa**
- [ ] Implementar rate limiting nas APIs
- [ ] Adicionar CSRF protection
- [ ] Implementar valida√ß√£o de input em todas as APIs
- [ ] Adicionar sanitiza√ß√£o de HTML no chat
- [ ] Implementar logs de seguran√ßa
- [ ] Adicionar monitoramento de atividades suspeitas

### 4. **Performance**
- [ ] Implementar cache no frontend
- [ ] Otimizar queries do banco de dados
- [ ] Adicionar √≠ndices nas tabelas
- [ ] Implementar pagina√ß√£o nas listas
- [ ] Otimizar imagens
- [ ] Implementar lazy loading

### 5. **Testes**
- [ ] Testes unit√°rios do backend
- [ ] Testes de integra√ß√£o
- [ ] Testes E2E do frontend
- [ ] Testes de carga
- [ ] Testes de seguran√ßa

### 6. **Documenta√ß√£o**
- [ ] Documenta√ß√£o da API (OpenAPI/Swagger)
- [ ] Guia de instala√ß√£o
- [ ] Guia de configura√ß√£o
- [ ] Documenta√ß√£o de estrat√©gias
- [ ] FAQ
- [ ] Troubleshooting

### 7. **Melhorias de UX**
- [ ] Adicionar anima√ß√µes mais suaves
- [ ] Implementar dark mode (opcional)
- [ ] Adicionar tooltips informativos
- [ ] Melhorar mensagens de erro
- [ ] Adicionar confirma√ß√µes antes de a√ß√µes cr√≠ticas
- [ ] Implementar undo/redo (onde aplic√°vel)

### 8. **Funcionalidades Futuras (Nice to Have)**
- [ ] Sistema de notifica√ß√µes push
- [ ] Integra√ß√£o com redes sociais
- [ ] Sistema de refer√™ncia (referral)
- [ ] Leaderboard de usu√°rios
- [ ] Badges e achievements
- [ ] Sistema de pontos/moeda interna
- [ ] API p√∫blica para desenvolvedores
- [ ] Mobile app (React Native)

---

## üöÄ COMO CONTINUAR

### Passo 1: Preparar o Ambiente
```bash
# Extrair o ZIP
unzip roleta-pro-ia-completo.zip
cd roleta-pro-v3

# Instalar depend√™ncias
pnpm install

# Configurar vari√°veis de ambiente
# Copiar .env.example para .env (se existir)
# Ou configurar as vari√°veis do Manus no painel

# Rodar o servidor de desenvolvimento
pnpm dev
```

### Passo 2: Fazer Deploy
1. **Criar reposit√≥rio GitHub** (novo)
2. **Push do c√≥digo** para GitHub
3. **Conectar Vercel** para frontend
4. **Conectar Render** para backend
5. **Configurar vari√°veis de ambiente** em produ√ß√£o
6. **Testar em produ√ß√£o**

### Passo 3: Pr√≥ximas Funcionalidades
Recomenda-se implementar nesta ordem:
1. Deploy (cr√≠tico)
2. WebSocket para chat em tempo real
3. Upload real de avatar
4. Integra√ß√£o com casa de aposta (API abstrata)
5. Testes automatizados
6. Documenta√ß√£o completa

---

## üìÅ ESTRUTURA DO PROJETO

```
roleta-pro-v3/
‚îú‚îÄ‚îÄ client/                    # Frontend (React)
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/            # P√°ginas principais
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/       # Componentes reutiliz√°veis
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ contexts/         # React contexts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/            # Custom hooks
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lib/              # Utilit√°rios
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ App.tsx           # Rotas principais
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.tsx          # Entry point
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.css         # Estilos globais
‚îÇ   ‚îú‚îÄ‚îÄ public/               # Assets est√°ticos
‚îÇ   ‚îú‚îÄ‚îÄ index.html            # HTML principal
‚îÇ   ‚îî‚îÄ‚îÄ vite.config.ts        # Config Vite
‚îú‚îÄ‚îÄ server/                    # Backend (Express + tRPC)
‚îÇ   ‚îú‚îÄ‚îÄ routers/              # tRPC routers
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin.ts          # Router de admin
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ strategies.ts     # Router de estrat√©gias
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bankroll.ts       # Router de banca
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bets.ts           # Router de apostas
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ chat.ts           # Router de chat
‚îÇ   ‚îú‚îÄ‚îÄ db.ts                 # Database helpers
‚îÇ   ‚îú‚îÄ‚îÄ routers.ts            # Router principal
‚îÇ   ‚îú‚îÄ‚îÄ storage.ts            # S3 storage helpers
‚îÇ   ‚îî‚îÄ‚îÄ _core/                # Core utilities
‚îú‚îÄ‚îÄ drizzle/                   # Database schema
‚îÇ   ‚îú‚îÄ‚îÄ schema.ts             # Defini√ß√£o das tabelas
‚îÇ   ‚îî‚îÄ‚îÄ migrations/           # Migra√ß√µes SQL
‚îú‚îÄ‚îÄ shared/                    # C√≥digo compartilhado
‚îú‚îÄ‚îÄ package.json              # Depend√™ncias
‚îî‚îÄ‚îÄ tsconfig.json             # Config TypeScript
```

---

## üîë VARI√ÅVEIS DE AMBIENTE (J√° Configuradas)

O projeto usa as seguintes vari√°veis (j√° injetadas pelo Manus):
- `DATABASE_URL` - Conex√£o MySQL
- `JWT_SECRET` - Secret para JWT
- `VITE_APP_ID` - OAuth App ID
- `OAUTH_SERVER_URL` - OAuth Server URL
- `VITE_OAUTH_PORTAL_URL` - OAuth Portal URL
- `OWNER_OPEN_ID` - Owner's Open ID
- `OWNER_NAME` - Owner's Name
- `VITE_APP_TITLE` - App Title (Roleta Pro I.A.)
- `VITE_APP_LOGO` - App Logo URL
- `BUILT_IN_FORGE_API_URL` - Manus API URL
- `BUILT_IN_FORGE_API_KEY` - Manus API Key

---

## üìä CHECKPOINTS SALVOS

- **47a2bf6d** - Projeto inicializado
- **fa65978e** - Corre√ß√µes finais (v3.0 removido, "100% Gr√°tis" simplificado)
- **0cb5f37f** - P√°gina do Rob√¥ de Apostas adicionada
- **051e7624** - Chat melhorado com nomes de usu√°rios e modera√ß√£o
- **3ddfbe63** - Painel de administra√ß√£o e perfil de usu√°rio
- **6f512300** - Sistema de sub-admin implementado (CHECKPOINT FINAL)

---

## üéØ PR√ìXIMAS PRIORIDADES

1. **Deploy** (CR√çTICO) - Publicar em Vercel/Render
2. **WebSocket** - Chat em tempo real
3. **Testes** - Implementar testes automatizados
4. **Documenta√ß√£o** - Criar documenta√ß√£o completa
5. **Integra√ß√£o de API** - Preparar para integra√ß√£o com casas de aposta reais

---

## üìû NOTAS IMPORTANTES

- O projeto usa **Manus OAuth** para autentica√ß√£o (j√° configurado)
- O banco de dados √© **MySQL** (TiDB compat√≠vel)
- O frontend usa **React 19** + **Tailwind 4**
- O backend usa **Express 4** + **tRPC 11**
- O projeto est√° **100% funcional** em desenvolvimento
- Todas as p√°ginas est√£o **responsivas**
- O design usa **tema vermelho e preto** conforme solicitado
- O sistema de permiss√µes tem **3 n√≠veis** (Admin, Sub-Admin, Usu√°rio)

---

## ‚úÖ CHECKLIST FINAL

- [x] Landing Page
- [x] Dashboard
- [x] Rob√¥ de Apostas
- [x] Gerenciamento de Estrat√©gias
- [x] Gerenciamento de Banca
- [x] Chat com Modera√ß√£o
- [x] Perfil de Usu√°rio
- [x] Painel de Administra√ß√£o
- [x] Sistema de Permiss√µes (3 n√≠veis)
- [x] Autentica√ß√£o OAuth
- [x] Banco de Dados
- [x] Design (Vermelho e Preto)
- [ ] Deploy
- [ ] WebSocket para Chat
- [ ] Testes Automatizados
- [ ] Documenta√ß√£o Completa

---

**√öltima Atualiza√ß√£o:** 23 de Outubro de 2025
**Status:** Pronto para Deploy ‚úÖ
**Pr√≥ximo Passo:** Fazer o Deploy em Vercel/Render

